import{a4 as e,a5 as t,a6 as a,v as n,X as s,a7 as o,a8 as r,F as l,a9 as i,a3 as d,n as u,N as c,aa as m}from"./vue-CKazsH5E.js";import{V as h,a as p,b as g,c as f,d as b,e as y,f as D,g as w,h as v,i as M,j as P,k as x,l as _,m as I,n as S,o as F,p as k,q as A,r as V,s as E,t as L,u as C,v as U,w as $,x as N}from"./vuetify-C3M7gBv-.js";import{P as R,r as z}from"./pdf-DZJTvXNE.js";import{J as H,F as T}from"./vendor-DcA13BtC.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const O=(e,t)=>{const a=e.__vccOpts||e;for(const[n,s]of t)a[n]=s;return a};const j={doctor:{x:180,y:627,fontSize:16},date:{x:500,y:650,fontSize:12},number:{x:490,y:627,fontSize:12}},q={r:0,g:0,b:0},Z={doctors:["Dr. Wheatley","Dr. Hamlett","Dr. Hutchins"],numberMin:47001,numberMax:50010,pdfCount:5},B="Failed to load the base PDF template. Please ensure PhysicianQA.pdf is in the public folder.",G="Failed to create filled PDF";async function Y(e){try{const a=await async function(){try{const e=await fetch("./PhysicianQA.pdf");if(!e.ok)throw new Error(`Failed to load PDF: ${e.status} ${e.statusText}`);return new Uint8Array(await e.arrayBuffer())}catch(e){throw new Error(B)}}(),n=await R.create(),s=await R.load(a),[o]=await n.copyPages(s,[0]),r=n.addPage(o);r.getSize();try{r.node}catch(t){}W(r,"doctor",e.doctor),W(r,"date",e.date),W(r,"number",e.number.toString());return await n.save()}catch(a){throw new Error(`${G}: ${a.message}`)}}function W(e,t,a){const n=j[t];if(n)try{e.drawText(a,{x:n.x,y:n.y,size:n.fontSize,color:z(q.r,q.g,q.b)})}catch(s){}}function K(e){return`doc-${e.doctor.replace(/^Dr\.?\s*/i,"").replace(/[^a-zA-Z0-9]/g,"").substring(0,20)}-${`${e.dateObj.getFullYear()}${String(e.dateObj.getMonth()+1).padStart(2,"0")}${String(e.dateObj.getDate()).padStart(2,"0")}`}-${e.number}.pdf`}function J(){const e=function(){const e=new Date((new Date).toLocaleString("en-US",{timeZone:"America/Chicago"}));return new Date(e.getFullYear(),e.getMonth(),1)}(),t=function(){const e=new Date((new Date).toLocaleString("en-US",{timeZone:"America/Chicago"}));return new Date(e.getFullYear(),e.getMonth(),e.getDate())}().getTime()-e.getTime(),a=Math.floor(t/864e5),n=Math.floor(Math.random()*(a+1)),s=new Date(e);return s.setDate(e.getDate()+n),s}const Q={class:"mb-6"},X={key:1,class:"mt-6"};const ee=O({name:"App",components:{DoctorListEditor:O({name:"DoctorListEditor",props:{modelValue:{type:Array,default:()=>[]}},emits:["update:modelValue","update"],data(){return{doctors:[...this.modelValue],draggedIndex:null,isUpdatingFromParent:!1}},watch:{modelValue:{handler(e){this.isUpdatingFromParent||(this.doctors=[...e])},deep:!0},doctors:{handler(e){this.isUpdatingFromParent=!0,this.$emit("update:modelValue",e),this.$emit("update",e),this.$nextTick(()=>{this.isUpdatingFromParent=!1})},deep:!0}},methods:{addDoctor(){this.doctors.push("Dr. ")},removeDoctor(e){this.doctors.length>1&&this.doctors.splice(e,1)},startDrag(e){this.draggedIndex=e,document.addEventListener("mousemove",this.onDrag),document.addEventListener("mouseup",this.stopDrag)},onDrag(e){if(null===this.draggedIndex)return;const t=document.querySelectorAll(".v-list-item");t[this.draggedIndex].getBoundingClientRect();let a=this.draggedIndex;if(t.forEach((t,n)=>{const s=t.getBoundingClientRect();e.clientY>=s.top&&e.clientY<=s.bottom&&(a=n)}),a!==this.draggedIndex){const e=this.doctors[this.draggedIndex];this.doctors.splice(this.draggedIndex,1),this.doctors.splice(a,0,e),this.draggedIndex=a}},stopDrag(){this.draggedIndex=null,document.removeEventListener("mousemove",this.onDrag),document.removeEventListener("mouseup",this.stopDrag)}},beforeUnmount(){document.removeEventListener("mousemove",this.onDrag),document.removeEventListener("mouseup",this.stopDrag)}},[["render",function(d,u,c,m,M,P){return a(),e(h,null,{default:t(()=>[n(p,{class:"d-flex align-center"},{default:t(()=>[n(g,{class:"me-2"},{default:t(()=>[...u[1]||(u[1]=[s("mdi-account-multiple",-1)])]),_:1}),u[2]||(u[2]=s(" Doctor List ",-1))]),_:1}),n(f,null,{default:t(()=>[n(b,{density:"compact"},{default:t(()=>[(a(!0),r(l,null,i(M.doctors,(s,o)=>(a(),e(y,{key:o,class:"px-0"},{prepend:t(()=>[n(w,{icon:"mdi-drag-vertical",variant:"text",size:"small",class:"drag-handle me-2",onMousedown:e=>P.startDrag(o)},null,8,["onMousedown"])]),append:t(()=>[n(w,{icon:"mdi-delete",variant:"text",size:"small",color:"error",onClick:e=>P.removeDoctor(o),disabled:M.doctors.length<=1},null,8,["onClick","disabled"])]),default:t(()=>[n(D,{modelValue:M.doctors[o],"onUpdate:modelValue":e=>M.doctors[o]=e,variant:"outlined",density:"compact","hide-details":"",rules:[e=>!!e||"Name is required"],onInput:u[0]||(u[0]=e=>d.$emit("update",M.doctors))},null,8,["modelValue","onUpdate:modelValue","rules"])]),_:2},1024))),128))]),_:1}),n(w,{class:"mt-3",variant:"outlined","prepend-icon":"mdi-plus",onClick:P.addDoctor,block:""},{default:t(()=>[...u[3]||(u[3]=[s(" Add Doctor ",-1)])]),_:1},8,["onClick"]),0===M.doctors.length?(a(),e(v,{key:0,type:"warning",class:"mt-3",density:"compact"},{default:t(()=>[...u[4]||(u[4]=[s(" At least one doctor is required ",-1)])]),_:1})):o("",!0)]),_:1})]),_:1})}],["__scopeId","data-v-ad41c09f"]])},setup:()=>({DEFAULT_VALUES:Z}),data:()=>({formValid:!1,doctors:[...Z.doctors],numberMin:Z.numberMin,numberMax:Z.numberMax,generating:!1,generatedPDFs:[],generationStatus:null,deferredPrompt:null,showInstallPrompt:!1,beforeInstallPromptHandler:null,appInstalledHandler:null,snackbar:{show:!1,text:"",color:"info",timeout:4e3}}),computed:{canGenerate(){return this.formValid&&this.doctors.length>0&&this.doctors.every(e=>e.trim().length>0)&&this.numberMin<=this.numberMax&&!this.generating},numberMinRules(){return[e=>null!==e&&""!==e&&!isNaN(e)||"Must be a valid number",e=>parseInt(e)>=0||"Must be non-negative",e=>parseInt(e)<=this.numberMax||"Must be less than or equal to maximum"]},numberMaxRules(){return[e=>null!==e&&""!==e&&!isNaN(e)||"Must be a valid number",e=>parseInt(e)>=0||"Must be non-negative",e=>parseInt(e)>=this.numberMin||"Must be greater than or equal to minimum"]}},mounted(){this.loadSettings(),this.setupPWA()},beforeUnmount(){this.beforeInstallPromptHandler&&window.removeEventListener("beforeinstallprompt",this.beforeInstallPromptHandler),this.appInstalledHandler&&window.removeEventListener("appinstalled",this.appInstalledHandler)},methods:{loadSettings(){try{const e=localStorage.getItem("physicians-doctors");this.doctors=e?JSON.parse(e):[...Z.doctors];const t=localStorage.getItem("physicians-number-min");this.numberMin=t?parseInt(t):Z.numberMin;const a=localStorage.getItem("physicians-number-max");this.numberMax=a?parseInt(a):Z.numberMax}catch(e){this.doctors=[...Z.doctors],this.numberMin=Z.numberMin,this.numberMax=Z.numberMax}},saveDoctors(){try{localStorage.setItem("physicians-doctors",JSON.stringify(this.doctors))}catch(e){}},saveNumberRange(){try{localStorage.setItem("physicians-number-min",this.numberMin.toString()),localStorage.setItem("physicians-number-max",this.numberMax.toString())}catch(e){}},resetToDefaults(){this.doctors=[...Z.doctors],this.numberMin=Z.numberMin,this.numberMax=Z.numberMax,localStorage.removeItem("physicians-doctors"),localStorage.removeItem("physicians-number-min"),localStorage.removeItem("physicians-number-max"),this.showSnackbar("Reset to config defaults!","success")},async generatePDFs(){if(this.canGenerate){this.generating=!0,this.generatedPDFs=[],this.generationStatus=null;try{const e=[],t=new Set;for(let a=0;a<5;a++){let a,n=0;do{a=this.generateRandomData(),n++}while(t.has(this.getDataKey(a))&&n<10);t.add(this.getDataKey(a));const s=await Y(a),o=K(a);e.push({filename:o,data:a,pdfBytes:s})}this.generatedPDFs=e,this.generationStatus={type:"success",message:`Successfully generated ${e.length} PDFs!`}}catch(e){this.generationStatus={type:"error",message:`Error generating PDFs: ${e.message}`}}finally{this.generating=!1}}},generateRandomData(){const e=this.doctors[Math.floor(Math.random()*this.doctors.length)],t=J();return{doctor:e,date:function(e){return`${String(e.getMonth()+1).padStart(2,"0")}/${String(e.getDate()).padStart(2,"0")}/${e.getFullYear()}`}(t),dateObj:t,number:Math.floor(Math.random()*(this.numberMax-this.numberMin+1))+this.numberMin}},getDataKey:e=>`${e.doctor}-${e.date}-${e.number}`,async downloadAll(){if(0!==this.generatedPDFs.length)try{const e=this.generatedPDFs.map(e=>({name:e.filename,data:e.pdfBytes}));await async function(e,t="physician-qa-pdfs.zip"){try{const a=new H;e.forEach(({name:e,data:t})=>{a.file(e,t)});const n=await a.generateAsync({type:"blob",compression:"DEFLATE",compressionOptions:{level:6}});return T.saveAs(n,t),!0}catch(a){throw new Error(`Failed to create ZIP file: ${a.message}`)}}(e),this.showSnackbar("ZIP file downloaded successfully!","success")}catch(e){this.showSnackbar(`Error downloading ZIP: ${e.message}`,"error")}},setupPWA(){this.beforeInstallPromptHandler=e=>{e.preventDefault(),this.deferredPrompt=e,this.showInstallPrompt=!0},this.appInstalledHandler=()=>{this.showInstallPrompt=!1,this.showSnackbar("App installed successfully!","success")},window.addEventListener("beforeinstallprompt",this.beforeInstallPromptHandler),window.addEventListener("appinstalled",this.appInstalledHandler)},async installPWA(){if(!this.deferredPrompt)return;this.deferredPrompt.prompt();(await this.deferredPrompt.userChoice).outcome,this.deferredPrompt=null,this.showInstallPrompt=!1},showSnackbar(e,t="info",a=4e3){this.snackbar={show:!0,text:e,color:t,timeout:a}}}},[["render",function(m,U,$,N,R,z){const H=d("DoctorListEditor");return a(),e(C,null,{default:t(()=>[n(M,{color:"primary",dark:""},{default:t(()=>[n(P,null,{default:t(()=>[n(g,{class:"me-2"},{default:t(()=>[...U[7]||(U[7]=[s("mdi-file-pdf-box",-1)])]),_:1}),U[8]||(U[8]=s(" PhysicianQA Filler ",-1))]),_:1}),n(x),R.showInstallPrompt?(a(),e(w,{key:0,variant:"outlined","prepend-icon":"mdi-download",onClick:z.installPWA,class:"me-2"},{default:t(()=>[...U[9]||(U[9]=[s(" Install App ",-1)])]),_:1},8,["onClick"])):o("",!0)]),_:1}),n(_,null,{default:t(()=>[n(I,{class:"py-8"},{default:t(()=>[n(S,{justify:"center"},{default:t(()=>[n(F,{cols:"12",md:"8",lg:"6"},{default:t(()=>[n(h,null,{default:t(()=>[n(p,{class:"text-h5 text-center py-6"},{default:t(()=>[...U[10]||(U[10]=[s(" PDF Generator ",-1)])]),_:1}),n(f,null,{default:t(()=>[n(k,{ref:"form",modelValue:R.formValid,"onUpdate:modelValue":U[3]||(U[3]=e=>R.formValid=e)},{default:t(()=>[u("div",Q,[n(H,{modelValue:R.doctors,"onUpdate:modelValue":U[0]||(U[0]=e=>R.doctors=e),onUpdate:z.saveDoctors},null,8,["modelValue","onUpdate"])]),n(h,{class:"mb-6"},{default:t(()=>[n(p,{class:"d-flex align-center"},{default:t(()=>[n(g,{class:"me-2"},{default:t(()=>[...U[11]||(U[11]=[s("mdi-numeric",-1)])]),_:1}),U[12]||(U[12]=s(" Number Range ",-1))]),_:1}),n(f,null,{default:t(()=>[n(S,null,{default:t(()=>[n(F,{cols:"6"},{default:t(()=>[n(D,{modelValue:R.numberMin,"onUpdate:modelValue":U[1]||(U[1]=e=>R.numberMin=e),modelModifiers:{number:!0},label:"Minimum",type:"number",variant:"outlined",rules:z.numberMinRules,onInput:z.saveNumberRange},null,8,["modelValue","rules","onInput"])]),_:1}),n(F,{cols:"6"},{default:t(()=>[n(D,{modelValue:R.numberMax,"onUpdate:modelValue":U[2]||(U[2]=e=>R.numberMax=e),modelModifiers:{number:!0},label:"Maximum",type:"number",variant:"outlined",rules:z.numberMaxRules,onInput:z.saveNumberRange},null,8,["modelValue","rules","onInput"])]),_:1})]),_:1}),n(S,null,{default:t(()=>[n(F,{cols:"12"},{default:t(()=>[n(w,{variant:"outlined",size:"small",onClick:z.resetToDefaults,block:""},{default:t(()=>[s(" Reset to Config Defaults ("+c(N.DEFAULT_VALUES.numberMin)+"-"+c(N.DEFAULT_VALUES.numberMax)+") ",1)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1}),n(w,{block:"",size:"large",color:"primary",disabled:!z.canGenerate,loading:R.generating,onClick:z.generatePDFs},{default:t(()=>[n(g,{class:"me-2"},{default:t(()=>[...U[13]||(U[13]=[s("mdi-creation",-1)])]),_:1}),U[14]||(U[14]=s(" Generate 5 PDFs ",-1))]),_:1},8,["disabled","loading","onClick"])]),_:1},8,["modelValue"]),R.generationStatus?(a(),e(v,{key:0,type:R.generationStatus.type,class:"mt-4",dismissible:"","onClick:close":U[4]||(U[4]=e=>R.generationStatus=null)},{default:t(()=>[s(c(R.generationStatus.message),1)]),_:1},8,["type"])):o("",!0),R.generatedPDFs.length>0?(a(),r("div",X,[n(A,{class:"mb-4"}),n(h,null,{default:t(()=>[n(p,{class:"d-flex align-center"},{default:t(()=>[n(g,{class:"me-2"},{default:t(()=>[...U[15]||(U[15]=[s("mdi-download",-1)])]),_:1}),s(" Generated PDFs ("+c(R.generatedPDFs.length)+") ",1)]),_:1}),n(f,null,{default:t(()=>[n(w,{block:"",size:"large",color:"success",onClick:z.downloadAll,disabled:0===R.generatedPDFs.length},{default:t(()=>[n(g,{class:"me-2"},{default:t(()=>[...U[16]||(U[16]=[s("mdi-download-multiple",-1)])]),_:1}),U[17]||(U[17]=s(" Download All as ZIP ",-1))]),_:1},8,["onClick","disabled"]),n(b,{class:"mt-4",density:"compact"},{default:t(()=>[(a(!0),r(l,null,i(R.generatedPDFs,(o,r)=>(a(),e(y,{key:r},{default:t(()=>[n(V,null,{default:t(()=>[s(c(o.filename),1)]),_:2},1024),n(E,null,{default:t(()=>[s(" Doctor: "+c(o.data.doctor)+" | Date: "+c(o.data.date)+" | Number: "+c(o.data.number),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})])):o("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),n(L,{modelValue:R.snackbar.show,"onUpdate:modelValue":U[6]||(U[6]=e=>R.snackbar.show=e),color:R.snackbar.color,timeout:R.snackbar.timeout},{actions:t(()=>[n(w,{variant:"text",onClick:U[5]||(U[5]=e=>R.snackbar.show=!1)},{default:t(()=>[...U[18]||(U[18]=[s(" Close ",-1)])]),_:1})]),default:t(()=>[s(c(R.snackbar.text)+" ",1)]),_:1},8,["modelValue","color","timeout"])]),_:1})}],["__scopeId","data-v-f6604766"]]),te=U({components:N,directives:$,theme:{defaultTheme:"light",themes:{light:{colors:{primary:"#1976D2",secondary:"#424242",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"}}}}}),ae=m(ee);ae.use(te),ae.mount("#app");
